# Lambda関数定義
# container名 → image/environment のマッピング

# デフォルト環境変数（全関数に注入）
defaults:
  environment:
    LAMBDA_ENDPOINT: "https://onpre-gateway:443"
    LOG_LEVEL: "${LOG_LEVEL}"

    # Standard Credentials for Boto3 (Local)
    AWS_ACCESS_KEY_ID: "rustfsadmin"
    AWS_SECRET_ACCESS_KEY: "rustfsadmin"
    AWS_DEFAULT_REGION: "ap-northeast-1"

functions:
  lambda-s3-test:
    environment:
      S3_ENDPOINT: "http://onpre-storage:9000"
      RUSTFS_ROOT_USER: "rustfsadmin"
      RUSTFS_ROOT_PASSWORD: "rustfsadmin"

  lambda-hello: {}

  lambda-scylla-test:
    environment:
      DYNAMODB_ENDPOINT: "http://onpre-database:8000"

  lambda-invoke-test: {}
